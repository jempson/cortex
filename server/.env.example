# Cortex Server Configuration
# Copy this to .env and customize for your deployment

# Server port (default: 3001)
PORT=3001

# JWT secret key - CHANGE THIS IN PRODUCTION!
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-key-change-me-in-production

# JWT expiration (default: 7d)
JWT_EXPIRES_IN=7d

# Allowed CORS origins (comma-separated)
# Leave empty to allow all origins (development only!)
# Example: https://cortex.yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=

# Seed demo data on first run (default: false)
# Set to 'true' to create demo users (mal, zoe, etc.) with password Demo123!
# Only applies when cortex-data.json doesn't exist yet
SEED_DEMO_DATA=false

# Use SQLite database instead of JSON files (recommended for production)
# USE_SQLITE=true

# =============================================================================
# Push Notifications (VAPID)
# =============================================================================
# Push notifications require VAPID (Voluntary Application Server Identification)
# keys. Without these, push notifications will be disabled (501 error).
#
# Generate VAPID keys by running this command in the server directory:
#   node -e "const wp = require('web-push'); const k = wp.generateVAPIDKeys(); console.log('VAPID_PUBLIC_KEY=' + k.publicKey + '\nVAPID_PRIVATE_KEY=' + k.privateKey);"
#
# IMPORTANT:
# - Generate keys ONCE and keep them forever - changing keys invalidates all
#   existing push subscriptions
# - Keep VAPID_PRIVATE_KEY secret - never commit it to version control
# - VAPID_EMAIL should be a valid contact email (mailto: prefix required)
#
# VAPID_PUBLIC_KEY=your-public-key-here
# VAPID_PRIVATE_KEY=your-private-key-here
# VAPID_EMAIL=mailto:admin@yourdomain.com

# =============================================================================
# GIPHY Integration
# =============================================================================
# Get a free API key at https://developers.giphy.com/
# Without this, the GIF search feature will be disabled
#
# GIPHY_API_KEY=your-giphy-api-key

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# Increase these values for development/testing to avoid lockouts
# Defaults shown - uncomment and adjust as needed

# Max login attempts per 15 minutes (default: 30)
# RATE_LIMIT_LOGIN_MAX=30

# Max registration attempts per hour (default: 15)
# RATE_LIMIT_REGISTER_MAX=15

# Max API requests per minute (default: 300)
# RATE_LIMIT_API_MAX=300

# Max GIF searches per minute (default: 30)
# RATE_LIMIT_GIF_MAX=30

# Account lockout threshold - failed attempts before lockout (default: 15)
# LOCKOUT_THRESHOLD=15

# Account lockout duration in minutes (default: 15)
# LOCKOUT_DURATION_MINUTES=15

# =============================================================================
# Federation (v1.13.0)
# =============================================================================
# Federation enables server-to-server communication for cross-instance waves.
# When enabled, users can participate in waves hosted on other Cortex servers.
#
# IMPORTANT:
# - FEDERATION_NODE_NAME should be your server's public hostname
# - Federation uses RSA keypairs for server authentication (auto-generated)
# - Trust is manual - admins must explicitly add trusted federation partners
#
# Enable federation (default: false)
# FEDERATION_ENABLED=false
#
# Your server's federation hostname (required if federation enabled)
# This should match how other servers will connect to you
# FEDERATION_NODE_NAME=cortex.example.com
