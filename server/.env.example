# Cortex Server Configuration
# Copy this to .env and customize for your deployment

# Server port (default: 3001)
PORT=3001

# JWT secret key - CHANGE THIS IN PRODUCTION!
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secret-key-change-me-in-production

# JWT expiration (default: 7d)
JWT_EXPIRES_IN=7d

# Allowed CORS origins (comma-separated)
# Leave empty to allow all origins (development only!)
# Example: https://cortex.yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=

# Seed demo data on first run (default: false)
# Set to 'true' to create demo users (mal, zoe, etc.) with password Demo123!
# Only applies when cortex-data.json doesn't exist yet
SEED_DEMO_DATA=false

# Use SQLite database instead of JSON files (recommended for production)
# USE_SQLITE=true

# =============================================================================
# Push Notifications (VAPID)
# =============================================================================
# Push notifications require VAPID (Voluntary Application Server Identification)
# keys. Without these, push notifications will be disabled (501 error).
#
# Generate VAPID keys by running this command in the server directory:
#   node -e "const wp = require('web-push'); const k = wp.generateVAPIDKeys(); console.log('VAPID_PUBLIC_KEY=' + k.publicKey + '\nVAPID_PRIVATE_KEY=' + k.privateKey);"
#
# IMPORTANT:
# - Generate keys ONCE and keep them forever - changing keys invalidates all
#   existing push subscriptions
# - Keep VAPID_PRIVATE_KEY secret - never commit it to version control
# - VAPID_EMAIL should be a valid contact email (mailto: prefix required)
#
# VAPID_PUBLIC_KEY=your-public-key-here
# VAPID_PRIVATE_KEY=your-private-key-here
# VAPID_EMAIL=mailto:admin@yourdomain.com

# =============================================================================
# GIF Search Integration
# =============================================================================
# Cortex supports both GIPHY and Tenor for GIF search.
# Configure one or both providers. Use GIF_PROVIDER to choose which to use.
#
# GIPHY - Get a free API key at https://developers.giphy.com/
# GIPHY_API_KEY=your-giphy-api-key
#
# TENOR - Get a free API key at https://developers.google.com/tenor/guides/quickstart
# (Tenor is part of Google, uses Google Cloud Console for API key)
# TENOR_API_KEY=your-tenor-api-key
#
# GIF_PROVIDER options:
#   'giphy'  - Use GIPHY only (default)
#   'tenor'  - Use Tenor only
#   'both'   - Use both providers, results interleaved
# GIF_PROVIDER=giphy

# =============================================================================
# Rate Limiting Configuration
# =============================================================================
# Increase these values for development/testing to avoid lockouts
# Defaults shown - uncomment and adjust as needed

# Max login attempts per 15 minutes (default: 30)
# RATE_LIMIT_LOGIN_MAX=30

# Max registration attempts per hour (default: 15)
# RATE_LIMIT_REGISTER_MAX=15

# Max API requests per minute (default: 300)
# RATE_LIMIT_API_MAX=300

# Max GIF searches per minute (default: 30)
# RATE_LIMIT_GIF_MAX=30

# Account lockout threshold - failed attempts before lockout (default: 15)
# LOCKOUT_THRESHOLD=15

# Account lockout duration in minutes (default: 15)
# LOCKOUT_DURATION_MINUTES=15

# =============================================================================
# Federation (v1.13.0)
# =============================================================================
# Federation enables server-to-server communication for cross-instance waves.
# When enabled, users can participate in waves hosted on other Cortex servers.
#
# IMPORTANT:
# - FEDERATION_NODE_NAME should be your server's public hostname
# - Federation uses RSA keypairs for server authentication (auto-generated)
# - Trust is manual - admins must explicitly add trusted federation partners
#
# Enable federation (default: false)
# FEDERATION_ENABLED=false
#
# Your server's federation hostname (required if federation enabled)
# This should match how other servers will connect to you
# FEDERATION_NODE_NAME=cortex.example.com

# =============================================================================
# Email Service (v1.14.0)
# =============================================================================
# Email is required for password reset and email MFA features.
# Without email configured, these features will return errors.
#
# EMAIL_PROVIDER=smtp  # smtp, sendgrid, or mailgun
#
# SMTP Configuration:
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-username
# SMTP_PASS=your-password
# EMAIL_FROM=noreply@yourdomain.com
#
# SendGrid Configuration:
# EMAIL_PROVIDER=sendgrid
# SENDGRID_API_KEY=SG.xxx
# EMAIL_FROM=noreply@yourdomain.com
#
# Mailgun Configuration:
# EMAIL_PROVIDER=mailgun
# MAILGUN_API_KEY=xxx
# MAILGUN_DOMAIN=mg.yourdomain.com
# EMAIL_FROM=noreply@yourdomain.com

# =============================================================================
# Database Encryption (v1.14.0)
# =============================================================================
# Optional encryption at rest using SQLCipher.
# Requires @journeyapps/sqlcipher instead of better-sqlite3.
#
# DB_ENCRYPTION_KEY=your-32-byte-hex-key

# =============================================================================
# Crawl Bar - External Data Sources (v1.15.0)
# =============================================================================
# The crawl bar displays stocks, weather, and news in a scrolling ticker.
# Multiple providers can be configured - they will be used as fallbacks.
# Without any keys for a category, that section will be hidden.
#
# -----------------------------------------------------------------------------
# STOCK DATA
# -----------------------------------------------------------------------------
# FINNHUB API - Stock market data
# Get a free API key at https://finnhub.io/
# Free tier: 60 API calls/minute
# FINNHUB_API_KEY=your-finnhub-api-key
#
# -----------------------------------------------------------------------------
# WEATHER DATA (providers tried in order, first success wins)
# -----------------------------------------------------------------------------
# OPENWEATHERMAP API (primary) - Weather data
# Get a free API key at https://openweathermap.org/api
# Free tier: 1000 calls/day, supports weather alerts
# OPENWEATHERMAP_API_KEY=your-openweathermap-api-key
#
# WEATHERAPI.COM (fallback) - Weather data
# Get a free API key at https://www.weatherapi.com/
# Free tier: 1,000,000 calls/month
# WEATHERAPI_KEY=your-weatherapi-key
#
# TOMORROW.IO (fallback) - Weather data
# Get a free API key at https://www.tomorrow.io/
# Free tier: 500 calls/day
# TOMORROWIO_API_KEY=your-tomorrowio-api-key
#
# -----------------------------------------------------------------------------
# NEWS DATA (all configured providers are used, results combined)
# -----------------------------------------------------------------------------
# NEWSAPI.ORG - News headlines
# Get a free API key at https://newsapi.org/
# Free tier: 100 requests/day (dev only, localhost)
# NEWSAPI_KEY=your-newsapi-key
#
# GNEWS.IO - News headlines
# Get a free API key at https://gnews.io/
# Free tier: 100 requests/day
# GNEWS_API_KEY=your-gnews-api-key
#
# MEDIASTACK - News headlines
# Get a free API key at https://mediastack.com/
# Free tier: 500 requests/month
# MEDIASTACK_API_KEY=your-mediastack-api-key
#
# RSS FEEDS - Custom news sources (comma-separated URLs)
# Add your favorite RSS/Atom feeds for news headlines
# Example: NEWS_RSS_FEEDS=https://feeds.bbci.co.uk/news/rss.xml,https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml
# NEWS_RSS_FEEDS=
#
# -----------------------------------------------------------------------------
# GEOLOCATION
# -----------------------------------------------------------------------------
# IPINFO.IO - Enhanced IP geolocation (optional)
# Using ip-api.com by default (free, no key needed)
# For higher limits, get a token at https://ipinfo.io/
# IPINFO_TOKEN=your-ipinfo-token
#
# Crawl bar rate limiting (requests per minute)
# RATE_LIMIT_CRAWL_MAX=60

# =============================================================================
# Security & Privacy (v1.18.0)
# =============================================================================
# HTTPS Enforcement
# When enabled, HTTP requests are redirected to HTTPS in production.
# Requires a reverse proxy (nginx, Caddy) to handle SSL termination.
# ENFORCE_HTTPS=true

# CORS Strict Mode (default: true)
# When true, ALLOWED_ORIGINS must be set in production.
# Set to false in development to allow all origins.
# CORS_STRICT_MODE=true

# Session Tracking (default: true)
# When enabled, login sessions are tracked in the database and can be revoked.
# Users can view and manage their active sessions in Profile Settings.
# SESSION_TRACKING_ENABLED=true
